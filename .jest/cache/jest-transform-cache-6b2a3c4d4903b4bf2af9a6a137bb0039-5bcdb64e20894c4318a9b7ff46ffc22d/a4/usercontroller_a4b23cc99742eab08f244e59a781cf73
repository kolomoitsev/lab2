b19084fec16f7a02b23c17aba1712b86
"use strict";

var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.UserController = void 0;

const userModel = require('./../models/user.model');

const bCrypt = require('bcrypt');

class UserController {
  findUser(userEmail) {
    return __awaiter(this, void 0, void 0, function* () {
      return userModel.findOne({
        userEmail
      });
    });
  }

  changePassword(opts) {
    return __awaiter(this, void 0, void 0, function* () {
      return userModel.findOneAndUpdate({
        userEmail: opts.userEmail
      }, {
        userPassword: yield bCrypt.hash(opts.userPassword, 10)
      }).select('-userPassword');
    });
  }

  getAll() {
    return __awaiter(this, void 0, void 0, function* () {
      return userModel.find({}).select('-userPassword');
    });
  }

  refreshToken() {
    return __awaiter(this, void 0, void 0, function* () {});
  }

  register(opts) {
    return __awaiter(this, void 0, void 0, function* () {
      let user = new userModel({
        userName: opts.userName,
        userLastName: opts.userLastName,
        userEmail: opts.userEmail,
        userPhone: opts.userPhone,
        userPassword: yield bCrypt.hash(opts.userPassword, 10)
      });
      yield user.save();
      user = user.toObject();
      delete user.userPassword;
      return user;
    });
  }

}

exports.UserController = UserController;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb250cm9sbGVycy91c2VyLmNvbnRyb2xsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUEsTUFBTSxTQUFTLEdBQUcsT0FBTyxDQUFDLHdCQUFELENBQXpCOztBQUNBLE1BQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxRQUFELENBQXRCOztBQVdBLE1BQWEsY0FBYixDQUEyQjtBQUNWLEVBQUEsUUFBUSxDQUFDLFNBQUQsRUFBa0I7O0FBQ25DLGFBQU8sU0FBUyxDQUFDLE9BQVYsQ0FBa0I7QUFDckIsUUFBQTtBQURxQixPQUFsQixDQUFQO0FBR0gsSztBQUFBOztBQUVZLEVBQUEsY0FBYyxDQUFDLElBQUQsRUFBc0I7O0FBQzdDLGFBQU8sU0FBUyxDQUFDLGdCQUFWLENBQTJCO0FBQzlCLFFBQUEsU0FBUyxFQUFFLElBQUksQ0FBQztBQURjLE9BQTNCLEVBRUo7QUFDQyxRQUFBLFlBQVksRUFBRSxNQUFNLE1BQU0sQ0FBQyxJQUFQLENBQVksSUFBSSxDQUFDLFlBQWpCLEVBQStCLEVBQS9CO0FBRHJCLE9BRkksRUFLRixNQUxFLENBS0ssZUFMTCxDQUFQO0FBT0gsSztBQUFBOztBQUVZLEVBQUEsTUFBTSxHQUFBOztBQUNmLGFBQU8sU0FBUyxDQUFDLElBQVYsQ0FBZSxFQUFmLEVBQ0YsTUFERSxDQUNLLGVBREwsQ0FBUDtBQUVILEs7QUFBQTs7QUFFWSxFQUFBLFlBQVksR0FBQTt5REFFeEIsQztBQUFBOztBQUVZLEVBQUEsUUFBUSxDQUFDLElBQUQsRUFBWTs7QUFFN0IsVUFBSSxJQUFJLEdBQUcsSUFBSSxTQUFKLENBQWM7QUFDckIsUUFBQSxRQUFRLEVBQUUsSUFBSSxDQUFDLFFBRE07QUFFckIsUUFBQSxZQUFZLEVBQUUsSUFBSSxDQUFDLFlBRkU7QUFHckIsUUFBQSxTQUFTLEVBQUUsSUFBSSxDQUFDLFNBSEs7QUFJckIsUUFBQSxTQUFTLEVBQUUsSUFBSSxDQUFDLFNBSks7QUFLckIsUUFBQSxZQUFZLEVBQUUsTUFBTSxNQUFNLENBQUMsSUFBUCxDQUFZLElBQUksQ0FBQyxZQUFqQixFQUErQixFQUEvQjtBQUxDLE9BQWQsQ0FBWDtBQVFBLFlBQU0sSUFBSSxDQUFDLElBQUwsRUFBTjtBQUNBLE1BQUEsSUFBSSxHQUFHLElBQUksQ0FBQyxRQUFMLEVBQVA7QUFFQSxhQUFPLElBQUksQ0FBQyxZQUFaO0FBQ0EsYUFBTyxJQUFQO0FBQ0gsSztBQUFBOztBQXpDc0I7O0FBQTNCLE9BQUEsQ0FBQSxjQUFBLEdBQUEsY0FBQSIsInNvdXJjZVJvb3QiOiIifQ==